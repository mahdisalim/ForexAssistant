# ğŸ—ï¸ Ù…Ø¹Ù…Ø§Ø±ÛŒ ÙÙ†ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ Forex Analysis Assistant

**Ù†Ø³Ø®Ù‡:** 2.0  
**ØªØ§Ø±ÛŒØ®:** 2025-12-22

---

## ğŸ“‹ ÙÙ‡Ø±Ø³Øª Ù…Ø·Ø§Ù„Ø¨

1. [Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ](#Ù†Ù…Ø§ÛŒ-Ú©Ù„ÛŒ)
2. [Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø³ÛŒØ³ØªÙ…](#Ù…Ø¹Ù…Ø§Ø±ÛŒ-Ø³ÛŒØ³ØªÙ…)
3. [Ù„Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡](#Ù„Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ-Ø¨Ø±Ù†Ø§Ù…Ù‡)
4. [Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³](#Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ-Ø¯ÛŒØªØ§Ø¨ÛŒØ³)
5. [Ø¬Ø±ÛŒØ§Ù† Ø¯Ø§Ø¯Ù‡](#Ø¬Ø±ÛŒØ§Ù†-Ø¯Ø§Ø¯Ù‡)
6. [Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ø±Ø¬ÛŒ](#Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ-Ø®Ø§Ø±Ø¬ÛŒ)
7. [Ø§Ù…Ù†ÛŒØª](#Ø§Ù…Ù†ÛŒØª)
8. [Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ](#Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ)

---

## ğŸ¯ Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ

Forex Analysis Assistant ÛŒÚ© Ù¾Ù„ØªÙØ±Ù… Ø¬Ø§Ù…Ø¹ Ø¨Ø±Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ Ùˆ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø®ÙˆØ¯Ú©Ø§Ø± ÙØ§Ø±Ú©Ø³ Ø§Ø³Øª Ú©Ù‡ Ø§Ø² Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

### Ø§Ù‡Ø¯Ø§Ù Ù…Ø¹Ù…Ø§Ø±ÛŒ:
- **Modularity**: Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ø³ØªÙ‚Ù„ Ùˆ Ù‚Ø§Ø¨Ù„ ØªØ¹ÙˆÛŒØ¶
- **Scalability**: Ù‚Ø§Ø¨Ù„ÛŒØª Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø§ÙÙ‚ÛŒ
- **Maintainability**: Ú©Ø¯ ØªÙ…ÛŒØ² Ùˆ Ù‚Ø§Ø¨Ù„ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ
- **Reliability**: Ø³ÛŒØ³ØªÙ… Ù¾Ø§ÛŒØ¯Ø§Ø± Ø¨Ø§ error handling Ù…Ù†Ø§Ø³Ø¨

---

## ğŸ›ï¸ Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø³ÛŒØ³ØªÙ…

### Ù…Ø¹Ù…Ø§Ø±ÛŒ ÙØ¹Ù„ÛŒ (Hybrid)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Load Balancer                         â”‚
â”‚                      (Nginx - Optional)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Django App    â”‚            â”‚  FastAPI App    â”‚
â”‚   (Primary)     â”‚            â”‚  (Legacy/API)   â”‚
â”‚                 â”‚            â”‚                 â”‚
â”‚ - REST API      â”‚            â”‚ - Web UI        â”‚
â”‚ - Admin Panel   â”‚            â”‚ - WebSocket     â”‚
â”‚ - Auth          â”‚            â”‚ - Real-time     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                               â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL    â”‚            â”‚      Redis      â”‚
â”‚   (Database)    â”‚            â”‚   (Cache/Queue) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                               â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  Celery Worker  â”‚
                â”‚  + Celery Beat  â”‚
                â”‚                 â”‚
                â”‚ - Async Tasks   â”‚
                â”‚ - Scheduling    â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   OpenAI API    â”‚            â”‚  News Sources   â”‚
â”‚   (GPT-4o-mini) â”‚            â”‚  (5 Scrapers)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“š Ù„Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡

### 1. Presentation Layer (Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ)

#### Django Templates
```
/srv/templates/
â”œâ”€â”€ landing.html          # ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ
â”œâ”€â”€ index.html            # Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
â”œâ”€â”€ signin.html           # ÙˆØ±ÙˆØ¯
â”œâ”€â”€ signup.html           # Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…
â”œâ”€â”€ pricing.html          # Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ
â””â”€â”€ emails/               # Ù‚Ø§Ù„Ø¨â€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ…ÛŒÙ„
    â”œâ”€â”€ verification_fa.html
    â”œâ”€â”€ password_reset_fa.html
    â””â”€â”€ ...
```

#### Static Files
```
/srv/web/static/
â”œâ”€â”€ css/
â”œâ”€â”€ js/
â”œâ”€â”€ images/
â””â”€â”€ locales/              # ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ ØªØ±Ø¬Ù…Ù‡
```

---

### 2. Application Layer (Ù…Ù†Ø·Ù‚ Ø¨Ø±Ù†Ø§Ù…Ù‡)

#### Django Apps

##### A. Accounts App (`apps/accounts/`)
**Ù…Ø³Ø¦ÙˆÙ„ÛŒØª:** Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ùˆ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª

**Components:**
```python
models.py:
  - User (Custom User Model)
  - AuthToken (Token-based Auth)
  - EmailVerification (Ú©Ø¯Ù‡Ø§ÛŒ ØªØ§ÛŒÛŒØ¯)
  - PasswordResetToken (Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø±Ù…Ø²)
  - EmailNotification (Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ø§ÛŒÙ…ÛŒÙ„â€ŒÙ‡Ø§)

views.py:
  - sign_up() - Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…
  - sign_in() - ÙˆØ±ÙˆØ¯
  - logout() - Ø®Ø±ÙˆØ¬
  - get_current_user() - Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±

email_service.py:
  - EmailService class
  - 7 Ù…ØªØ¯ Ø¨Ø±Ø§ÛŒ Ø§Ù†ÙˆØ§Ø¹ Ø§ÛŒÙ…ÛŒÙ„â€ŒÙ‡Ø§

tasks.py (Celery):
  - check_subscription_expiry()
  - send_verification_email_task()
  - bulk_send_discount_offer()
```

**Database Schema:**
```sql
User:
  - id (PK)
  - email (UNIQUE)
  - password (hashed)
  - subscription_plan (free/premium)
  - subscription_expires
  - is_active

AuthToken:
  - id (PK)
  - user_id (FK)
  - token (UNIQUE)
  - created_at
  - expires_at
  - is_active

EmailVerification:
  - id (PK)
  - user_id (FK)
  - code (6 digits)
  - created_at
  - expires_at (15 min)
  - is_used
```

---

##### B. Analysis App (`apps/analysis/`)
**Ù…Ø³Ø¦ÙˆÙ„ÛŒØª:** ØªØ­Ù„ÛŒÙ„ Ø¨Ø§Ø²Ø§Ø± Ùˆ ØªÙˆÙ„ÛŒØ¯ Ø³ÛŒÚ¯Ù†Ø§Ù„

**Components:**
```python
models.py:
  - CurrencyPair (Ø¬ÙØª Ø§Ø±Ø²Ù‡Ø§)
  - MarketAnalysis (ØªØ­Ù„ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡)
  - DailySummary (Ø®Ù„Ø§ØµÙ‡ Ø±ÙˆØ²Ø§Ù†Ù‡)
  - ChartAnalysis (ØªØ­Ù„ÛŒÙ„ Ú†Ø§Ø±Øª)

services.py:
  - AnalysisService class
  - auto_chart_analysis() - ØªØ­Ù„ÛŒÙ„ Ø®ÙˆØ¯Ú©Ø§Ø±
  - generate_daily_summary() - Ø®Ù„Ø§ØµÙ‡ Ø±ÙˆØ²Ø§Ù†Ù‡
  - Multi-timeframe analysis

chart_service.py:
  - TradingViewChartService
  - capture_chart_screenshot() - Ø§Ø³Ú©Ø±ÛŒÙ†â€ŒØ´Ø§Øª Ú†Ø§Ø±Øª
  - capture_multi_timeframe_charts()

views.py:
  - list_pairs() - Ù„ÛŒØ³Øª Ø¬ÙØª Ø§Ø±Ø²Ù‡Ø§
  - analyze_pair() - ØªØ­Ù„ÛŒÙ„ ÛŒÚ© Ø¬ÙØª Ø§Ø±Ø²
  - daily_summary() - Ø®Ù„Ø§ØµÙ‡ Ø±ÙˆØ²Ø§Ù†Ù‡
  - multi_timeframe_analysis()
```

**Database Schema:**
```sql
CurrencyPair:
  - id (PK)
  - symbol (UNIQUE) - e.g., EURUSD
  - tradingview_symbol - e.g., FX:EURUSD
  - volatility (low/medium/high)
  - default_sl_pips
  - default_tp_pips
  - keywords (JSON)
  - is_active

MarketAnalysis:
  - id (PK)
  - pair_id (FK)
  - timeframe
  - sentiment (bullish/bearish/neutral)
  - sentiment_score (0-100)
  - recommendation (BUY/SELL/HOLD)
  - confidence (0-100)
  - analysis_text
  - generated_at

ChartAnalysis:
  - id (PK)
  - pair_id (FK)
  - timeframe
  - chart_image (base64)
  - analysis (JSON)
  - generated_at
```

---

##### C. Trading App (`apps/trading/`)
**Ù…Ø³Ø¦ÙˆÙ„ÛŒØª:** Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ø³Ø§Ø¨â€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ø§Ù…Ù„Ø§ØªÛŒ Ùˆ Ø±Ø¨Ø§Øªâ€ŒÙ‡Ø§

**Components:**
```python
models.py:
  - TradingAccount (Ø­Ø³Ø§Ø¨â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±)
  - TradingRobot (Ø±Ø¨Ø§Øªâ€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„)
  - Trade (Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡)

views.py:
  - list_trading_accounts()
  - add_trading_account()
  - get_available_robots()
  - create_robot()
  - list_trades()
```

**âš ï¸ ÙˆØ¶Ø¹ÛŒØª:** Ù†Ø§Ù‚Øµ - Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§Ø¯ØºØ§Ù… Ø¨Ø§ `/srv/trading/` Ùˆ `/srv/strategy_bots/`

---

##### D. Scraping App (`apps/scraping/`)
**Ù…Ø³Ø¦ÙˆÙ„ÛŒØª:** Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø§Ø®Ø¨Ø§Ø± Ø§Ø² Ù…Ù†Ø§Ø¨Ø¹ Ù…Ø®ØªÙ„Ù

**Components:**
```python
models.py:
  - NewsArticle (Ø§Ø®Ø¨Ø§Ø± Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡)
  - ScrapeLog (Ù„Ø§Ú¯ Ø§Ø³Ú©Ø±Ù¾ÛŒÙ†Ú¯)

tasks.py (Celery):
  - trigger_scrape_task()
  - daily_analysis_task()
```

**âš ï¸ ÙˆØ¶Ø¹ÛŒØª:** Ù†Ø§Ù‚Øµ - Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§Ø¯ØºØ§Ù… Ø¨Ø§ `/srv/scrapers/`

---

### 3. Business Logic Layer (Ù…Ù†Ø·Ù‚ Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±)

#### Independent Modules (Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ø³ØªÙ‚Ù„)

##### A. Scrapers (`/srv/scrapers/`)
**Ù…Ø³Ø¦ÙˆÙ„ÛŒØª:** Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø§Ø®Ø¨Ø§Ø± Ø§Ø² 5 Ù…Ù†Ø¨Ø¹

```python
base_scraper.py:
  - BaseScraper (Ú©Ù„Ø§Ø³ Ù¾Ø§ÛŒÙ‡)
  - NewsArticle (dataclass)

investing_scraper.py:
  - InvestingScraper
  - scrape() -> List[NewsArticle]

forexfactory_scraper.py:
  - ForexFactoryScraper
  - scrape_news()
  - scrape_calendar()

dailyfx_scraper.py:
  - DailyFXScraper

fxstreet_scraper.py:
  - FXStreetScraper

forexlive_scraper.py:
  - ForexLiveScraper

scraper_manager.py:
  - ScraperManager
  - scrape_all() - Ø§Ø¬Ø±Ø§ÛŒ Ù‡Ù…Ù‡ scrapers
  - filter_by_pairs()
  - save_to_file()
```

**Ù…Ù†Ø§Ø¨Ø¹ Ø®Ø¨Ø±ÛŒ:**
1. Investing.com - Ø§Ø®Ø¨Ø§Ø± Ø¬Ù‡Ø§Ù†ÛŒ
2. ForexFactory - ØªÙ‚ÙˆÛŒÙ… Ø§Ù‚ØªØµØ§Ø¯ÛŒ
3. DailyFX - ØªØ­Ù„ÛŒÙ„ ØªØ®ØµØµÛŒ
4. FXStreet - ØªØ­Ù„ÛŒÙ„ ÙÙ†ÛŒ
5. ForexLive - Ø§Ø®Ø¨Ø§Ø± Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ

---

##### B. LLM Analyzer (`/srv/llm/`)
**Ù…Ø³Ø¦ÙˆÙ„ÛŒØª:** ØªØ­Ù„ÛŒÙ„ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø§ AI

```python
analyzer.py (39,002 Ø®Ø·):
  - ForexAnalyzer
  - analyze_pair() - ØªØ­Ù„ÛŒÙ„ ÛŒÚ© Ø¬ÙØª Ø§Ø±Ø²
  - get_trade_recommendation() - Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…Ø¹Ø§Ù…Ù„Ù‡
  - analyze_news() - ØªØ­Ù„ÛŒÙ„ Ø§Ø®Ø¨Ø§Ø±
  - generate_daily_summary() - Ø®Ù„Ø§ØµÙ‡ Ø±ÙˆØ²Ø§Ù†Ù‡

chart_analyzer.py:
  - ChartImageAnalyzer
  - analyze_chart_image() - ØªØ­Ù„ÛŒÙ„ ØªØµÙˆÛŒØ± Ú†Ø§Ø±Øª
  - analyze_multi_timeframe_charts()

prompts.py:
  - ØªÙ…Ø§Ù… Ù¾Ø±Ø§Ù…Ù¾Øªâ€ŒÙ‡Ø§ÛŒ GPT
  - ANALYSIS_PROMPT
  - RECOMMENDATION_PROMPT
  - SUMMARY_PROMPT
```

**AI Workflow:**
```
News Articles â†’ ForexAnalyzer â†’ GPT-4o-mini â†’ Analysis
Chart Image â†’ ChartImageAnalyzer â†’ GPT-4o-mini Vision â†’ Chart Analysis
Multi-TF Charts â†’ analyze_multi_timeframe â†’ Comprehensive Analysis
```

---

##### C. Trading Modules (`/srv/trading/`)
**Ù…Ø³Ø¦ÙˆÙ„ÛŒØª:** Ù…Ù†Ø·Ù‚ Ù…Ø¹Ø§Ù…Ù„Ø§ØªÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡

```python
robot_manager.py (15,518 Ø®Ø·):
  - RobotManager
  - Ù…Ø¯ÛŒØ±ÛŒØª Ø±Ø¨Ø§Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ø§Ù…Ù„Ø§ØªÛŒ

unified_robots.py (15,808 Ø®Ø·):
  - UnifiedTradingRobot
  - Ø±Ø¨Ø§Øªâ€ŒÙ‡Ø§ÛŒ ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡

support_resistance.py (34,910 Ø®Ø·):
  - Ù…Ø­Ø§Ø³Ø¨Ø§Øª Support/Resistance
  - Pivot Points
  - Fibonacci Levels

advanced_sl_strategies.py (39,100 Ø®Ø·):
  - Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒâ€ŒÙ‡Ø§ÛŒ Stop Loss Ù¾ÛŒØ´Ø±ÙØªÙ‡

advanced_tp_strategies.py (30,809 Ø®Ø·):
  - Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒâ€ŒÙ‡Ø§ÛŒ Take Profit Ù¾ÛŒØ´Ø±ÙØªÙ‡

pattern_detection.py:
  - ØªØ´Ø®ÛŒØµ Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ù‚ÛŒÙ…ØªÛŒ

market_sessions.py:
  - Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø´Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²Ø§Ø±
```

---

##### D. Strategy Bots (`/srv/strategy_bots/`)
**Ù…Ø³Ø¦ÙˆÙ„ÛŒØª:** Ø±Ø¨Ø§Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒÚ©

```python
base_bot.py (11,774 Ø®Ø·):
  - BaseTradingBot
  - Ú©Ù„Ø§Ø³ Ù¾Ø§ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡ Ø±Ø¨Ø§Øªâ€ŒÙ‡Ø§

rsi_bot.py (21,550 Ø®Ø·):
  - RSITradingBot
  - Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ RSI

sl_strategies/:
  - 6 Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Ù…Ø®ØªÙ„Ù Stop Loss

tp_strategies/:
  - 6 Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Ù…Ø®ØªÙ„Ù Take Profit
```

---

##### E. Indicators (`/srv/indicators/`)
**Ù…Ø³Ø¦ÙˆÙ„ÛŒØª:** Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…Ø¹Ø§Ù…Ù„Ø§ØªÛŒ

```python
risk_manager.py:
  - RiskManager
  - Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ø¬Ù… Ù…Ø¹Ø§Ù…Ù„Ù‡
  - Ù…Ø¯ÛŒØ±ÛŒØª Ø±ÛŒØ³Ú©

trade_executor.py:
  - TradeExecutor
  - Ø§ØªØµØ§Ù„ Ø¨Ù‡ MetaTrader 5
  - Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø¹Ø§Ù…Ù„Ø§Øª
```

---

### 4. Data Layer (Ù„Ø§ÛŒÙ‡ Ø¯Ø§Ø¯Ù‡)

#### PostgreSQL Database
```
forex_assistant (database)
â”œâ”€â”€ accounts_user
â”œâ”€â”€ accounts_authtoken
â”œâ”€â”€ accounts_emailverification
â”œâ”€â”€ accounts_passwordresettoken
â”œâ”€â”€ accounts_emailnotification
â”œâ”€â”€ analysis_currencypair
â”œâ”€â”€ analysis_marketanalysis
â”œâ”€â”€ analysis_dailysummary
â”œâ”€â”€ analysis_chartanalysis
â”œâ”€â”€ trading_tradingaccount
â”œâ”€â”€ trading_tradingrobot
â”œâ”€â”€ trading_trade
â”œâ”€â”€ scraping_newsarticle
â””â”€â”€ scraping_scrapelog
```

#### Redis
```
Database 0: Cache
Database 1: Celery Broker
Database 2: Celery Results
```

#### File Storage
```
/srv/data/
â”œâ”€â”€ pairs.json           # Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø¬ÙØª Ø§Ø±Ø²Ù‡Ø§
â”œâ”€â”€ news_*.json          # Ø§Ø®Ø¨Ø§Ø± Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡
â”œâ”€â”€ daily_report_*.json  # Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ø±ÙˆØ²Ø§Ù†Ù‡
â””â”€â”€ charts/              # ØªØµØ§ÙˆÛŒØ± Ú†Ø§Ø±Øª
```

---

## ğŸ”„ Ø¬Ø±ÛŒØ§Ù† Ø¯Ø§Ø¯Ù‡

### 1. Ø¬Ø±ÛŒØ§Ù† Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ùˆ ÙˆØ±ÙˆØ¯

```
User â†’ POST /api/signup
  â†“
SignUpSerializer.validate()
  â†“
User.objects.create()
  â†“
AuthToken.generate_token()
  â†“
EmailService.send_verification_email()
  â†“
Celery Task (async)
  â†“
Gmail SMTP
  â†“
Response: {user, token}
```

### 2. Ø¬Ø±ÛŒØ§Ù† ØªØ­Ù„ÛŒÙ„ Ø¨Ø§Ø²Ø§Ø±

```
User â†’ GET /api/analysis/{pair}
  â†“
AnalysisService.auto_chart_analysis()
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚                 â”‚
TradingViewChartService  ScraperManager
â”‚                 â”‚                 â”‚
capture_screenshot()  scrape_all()
â”‚                 â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
    ForexAnalyzer
          â†“
    OpenAI API (GPT-4o-mini)
          â†“
    Analysis + Recommendation
          â†“
    Save to Database
          â†“
    Response: {analysis, recommendation}
```

### 3. Ø¬Ø±ÛŒØ§Ù† Ø®Ù„Ø§ØµÙ‡ Ø±ÙˆØ²Ø§Ù†Ù‡

```
Celery Beat (Daily 9:00 AM)
  â†“
check_subscription_expiry()
  â†“
Query Users (subscription_expires in 10/5/3 days)
  â†“
For each user:
  â†“
  EmailService.send_expiry_warning()
  â†“
  Celery Task (async)
  â†“
  Gmail SMTP
```

### 4. Ø¬Ø±ÛŒØ§Ù† Ù…Ø¹Ø§Ù…Ù„Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø± (Trading Bot)

```
TradingBot.run()
  â†“
ScraperManager.scrape_all()
  â†“
ForexAnalyzer.analyze_pair()
  â†“
Check confidence > MIN_CONFIDENCE
  â†“
RiskManager.calculate_position_size()
  â†“
TradeExecutor.place_order()
  â†“
MetaTrader 5 API
  â†“
Save Trade to Database
  â†“
Log to file
```

---

## ğŸ”Œ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ø±Ø¬ÛŒ

### 1. OpenAI API
```python
Endpoint: https://api.openai.com/v1/chat/completions
Model: gpt-4o-mini
Usage:
  - ØªØ­Ù„ÛŒÙ„ Ø§Ø®Ø¨Ø§Ø±
  - ØªÙˆÙ„ÛŒØ¯ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ù…Ø¹Ø§Ù…Ù„Ø§ØªÛŒ
  - Ø®Ù„Ø§ØµÙ‡ Ø±ÙˆØ²Ø§Ù†Ù‡ Ø¨Ø§Ø²Ø§Ø±
  - ØªØ­Ù„ÛŒÙ„ ØªØµÙˆÛŒØ± Ú†Ø§Ø±Øª (Vision API)

Rate Limits:
  - 10,000 requests/day (Ø¨Ø³ØªÙ‡ Ø¨Ù‡ plan)
  - Token limits per request
```

### 2. TradingView
```python
Usage:
  - Ø¯Ø±ÛŒØ§ÙØª Ú†Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ real-time
  - Playwright automation
  - Screenshot capture

URL Pattern:
  https://www.tradingview.com/chart/?symbol={symbol}&interval={timeframe}
```

### 3. News Sources APIs
```python
1. Investing.com
   - Web scraping (BeautifulSoup)
   - Rate limit: 1 req/sec

2. ForexFactory
   - Web scraping
   - Calendar API

3. DailyFX
   - RSS Feed + Web scraping

4. FXStreet
   - Web scraping

5. ForexLive
   - Web scraping
```

### 4. MetaTrader 5
```python
Library: MetaTrader5
Connection:
  - Login credentials
  - Server address
  - Demo/Live account

Functions:
  - initialize()
  - login()
  - symbol_info()
  - order_send()
  - positions_get()
```

### 5. Gmail SMTP
```python
Host: smtp.gmail.com
Port: 587
TLS: True
Authentication: App Password

Usage:
  - Ø§Ø±Ø³Ø§Ù„ Ú©Ø¯ ØªØ§ÛŒÛŒØ¯
  - Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±
  - Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†â€ŒÙ‡Ø§
```

---

## ğŸ” Ø§Ù…Ù†ÛŒØª

### Authentication & Authorization

```python
# Token-based Authentication
class TokenAuthentication(BaseAuthentication):
    def authenticate(self, request):
        token = get_token_from_header(request)
        auth_token = AuthToken.objects.get(token=token)
        if auth_token.is_valid():
            return (auth_token.user, auth_token)
        raise AuthenticationFailed()
```

### Password Security
- Django's PBKDF2 hashing
- Minimum 8 characters
- Password reset tokens expire in 1 hour

### API Key Security
```python
# Encryption for sensitive data
from cryptography.fernet import Fernet

ENCRYPTION_KEY = os.getenv('ENCRYPTION_KEY')
cipher = Fernet(ENCRYPTION_KEY)

encrypted_password = cipher.encrypt(password.encode())
```

### CORS Configuration
```python
CORS_ALLOWED_ORIGINS = [
    "http://localhost:3000",
    "https://yourdomain.com",
]
```

### Rate Limiting
```python
# TODO: Implement with Django-ratelimit
@ratelimit(key='ip', rate='100/h')
def api_endpoint(request):
    pass
```

---

## ğŸ“ˆ Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ

### Horizontal Scaling

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Load Balancer  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”
â”‚ App 1 â”‚ â”‚ App 2 â”‚ ... App N
â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚         â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL    â”‚
â”‚   (Primary)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL    â”‚
â”‚   (Replica)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Caching Strategy

```python
# Redis Caching
from django.core.cache import cache

def get_analysis(pair):
    cache_key = f'analysis:{pair}'
    cached = cache.get(cache_key)
    
    if cached:
        return cached
    
    analysis = generate_analysis(pair)
    cache.set(cache_key, analysis, timeout=3600)  # 1 hour
    return analysis
```

### Celery Workers

```
Celery Worker 1: Email tasks
Celery Worker 2: Scraping tasks
Celery Worker 3: Analysis tasks
Celery Beat: Scheduled tasks
```

### Database Optimization

```python
# Query optimization
users = User.objects.select_related('subscription').prefetch_related('analyses')

# Indexing
class Meta:
    indexes = [
        models.Index(fields=['email']),
        models.Index(fields=['subscription_expires']),
    ]
```

---

## ğŸ”§ ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡

| Ù„Ø§ÛŒÙ‡ | ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒ |
|------|----------|
| **Backend Framework** | Django 5.0.1 + FastAPI |
| **API** | Django REST Framework 3.15.2 |
| **Database** | PostgreSQL 15 |
| **Cache/Queue** | Redis 7 |
| **Task Queue** | Celery 5.3.6 |
| **AI/LLM** | OpenAI GPT-4o-mini |
| **Web Scraping** | BeautifulSoup4, httpx |
| **Browser Automation** | Playwright |
| **Email** | Gmail SMTP |
| **Trading** | MetaTrader5 |
| **Deployment** | Docker + Docker Compose |
| **Web Server** | Gunicorn + Nginx |

---

## ğŸ“Š Performance Metrics

### Target Performance:
- API Response Time: < 200ms (cached)
- Analysis Generation: < 30s
- Scraping All Sources: < 60s
- Database Query Time: < 50ms
- Concurrent Users: 100+

### Monitoring:
```python
# TODO: Implement
- Sentry for error tracking
- Prometheus for metrics
- Grafana for visualization
```

---

**ÛŒØ§Ø¯Ø¯Ø§Ø´Øª:** Ø§ÛŒÙ† Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø¯Ø± Ø­Ø§Ù„ ØªÚ©Ø§Ù…Ù„ Ø§Ø³Øª Ùˆ Ø¨Ø§ ØªÙˆØ³Ø¹Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡ Ø¨Ù‡â€ŒØ±ÙˆØ² Ù…ÛŒâ€ŒØ´ÙˆØ¯.
